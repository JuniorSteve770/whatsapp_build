(this.webpackJsonpsmart=this.webpackJsonpsmart||[]).push([[0],{73:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},78:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){"use strict";c.r(t);var a=c(4),s=c(2),n=c.n(s),r=c(27),i=c.n(r),j=(c(73),c(11)),o=c(29),d=c(9),l=(c(74),c(75),c(105)),h=c(36),b=(c(76),c(77),h.a.initializeApp({apiKey:"AIzaSyBK5WkC80DoNj5V-g9Fks8DOIbZxisTcNI",authDomain:"whatsapp-clone-react-dcec4.firebaseapp.com",databaseURL:"https://whatsapp-clone-react-dcec4.firebaseio.com",projectId:"whatsapp-clone-react-dcec4",storageBucket:"whatsapp-clone-react-dcec4.appspot.com",messagingSenderId:"537100702014",appId:"1:537100702014:web:a8889c6dfcad64fa395c6f",measurementId:"G-GRVNXFRPSV"}).firestore()),u=h.a.auth(),O=new h.a.auth.GoogleAuthProvider,m=b,p=c(50),x=c.n(p);c(78);var f=function(e){var t,c=e.id,n=e.name,r=e.addNewchats,i=Object(s.useState)(""),d=Object(j.a)(i,2),h=d[0],b=d[1],u=Object(s.useState)(""),O=Object(j.a)(u,2),p=O[0],f=O[1];return Object(s.useEffect)((function(){c&&m.collection("romChats").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(s.useEffect)((function(){b(Math.floor(5e3*Math.random()))}),[]),r?Object(a.jsx)("div",{onClick:function(){var e=prompt("please enter name for chat");e&&m.collection("romChats").add({name:e})},className:"subSidebar",children:Object(a.jsxs)("h3",{children:[" ",Object(a.jsx)(x.a,{})," Create New Chats..."]})}):Object(a.jsx)(o.b,{to:"/romChats/".concat(c),children:Object(a.jsxs)("div",{className:"subSidebar",children:[Object(a.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(h,".svg")}),Object(a.jsxs)("div",{className:"subSidebar_infos",children:[Object(a.jsx)("h2",{children:n}),Object(a.jsxs)("p",{children:[null===(t=p[0])||void 0===t?void 0:t.message," "]})]})]})})},v=c(103),g=c(53),S=c.n(g),N=c(52),C=c.n(N),w=c(51),_=c.n(w),y=c(54),I=c.n(y),E=Object(s.createContext)(),B=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(a.jsx)(E.Provider,{value:Object(s.useReducer)(t,c),children:n})},D=function(){return Object(s.useContext)(E)};var T=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],r=D(),i=Object(j.a)(r,2),o=i[0].user;return i[1],Object(s.useEffect)((function(){var e=m.collection("romChats").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(a.jsxs)("div",{className:"sideBar",children:[Object(a.jsxs)("div",{className:"Sidebar_Header",children:[Object(a.jsx)(l.a,{src:o.photoURL}),Object(a.jsxs)("div",{className:"side_headeright",children:[Object(a.jsx)(v.a,{children:Object(a.jsx)(_.a,{})}),Object(a.jsx)(v.a,{children:Object(a.jsx)(C.a,{})}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a,{})})]})]}),Object(a.jsx)("div",{className:"Sidebar_Search",children:Object(a.jsxs)("div",{className:"sidebar_Searchcontainer",children:[Object(a.jsx)(I.a,{}),Object(a.jsx)("input",{placeholder:"Search for Chat",type:"text"})]})}),Object(a.jsxs)("div",{className:"Sidebar_Chats",children:[Object(a.jsx)(f,{addNewchats:!0}),c.map((function(e){return Object(a.jsx)(f,{id:e.id,name:e.data.name},e.id)}))]})]})},k=c(63),F=c(56),R=c.n(F),P=c(55),A=c.n(P),H=c(57),M=c.n(H),U=c(58),G=c.n(U),L=c(61),V=c.n(L),z=c(60),W=c.n(z),J=c(59),K=c.n(J);c(89);var X=function(){var e,t,c=Object(s.useState)(""),n=Object(j.a)(c,2),r=n[0],i=n[1],o=Object(s.useState)(""),h=Object(j.a)(o,2),b=h[0],u=h[1],O=Object(d.f)().roomId,p=Object(s.useState)(""),x=Object(j.a)(p,2),f=x[0],g=x[1],S=Object(s.useState)([]),N=Object(j.a)(S,2),C=N[0],w=N[1],_=D(),y=Object(j.a)(_,2),I=y[0].user;return y[1],Object(s.useEffect)((function(){O&&(m.collection("romChats").doc(O).onSnapshot((function(e){return g(e.data().name)})),m.collection("romChats").doc(O).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return w(e.docs.map((function(e){return e.data()})))})))}),[O]),Object(s.useEffect)((function(){u(Math.floor(5e3*Math.random()))}),[O]),Object(a.jsxs)("div",{className:"chatt",children:[Object(a.jsxs)("div",{className:"chatts_Header",children:[Object(a.jsx)(l.a,{src:"https://avatars.dicebear.com/api/human/".concat(b,".svg")}),Object(a.jsxs)("div",{className:"chat_Header_Infos",children:[Object(a.jsx)("h3",{children:f}),Object(a.jsxs)("p",{children:["last seen:","",new Date(null===(e=C[C.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(a.jsxs)("div",{className:"chatt_Header_rigth",children:[Object(a.jsx)(v.a,{children:Object(a.jsx)(A.a,{})}),Object(a.jsx)(v.a,{children:Object(a.jsx)(R.a,{})}),Object(a.jsx)(v.a,{children:Object(a.jsx)(M.a,{})})]})]}),Object(a.jsx)("div",{className:"chatt_Body",children:C.map((function(e){var t;return Object(a.jsxs)("p",{className:"chatt_message ".concat(e.name===I.displayName&&"chatt_receiver"),children:[Object(a.jsx)("span",{className:"chatt_name",children:e.name}),e.message,Object(a.jsx)("span",{className:"chatt_time",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(a.jsxs)("div",{className:"chatt_Footer",children:[Object(a.jsx)(v.a,{children:Object(a.jsx)(G.a,{})}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{type:"text",value:r,onChange:function(e){return i(e.target.value)},placeholder:"type your text Here and press ENTER"}),Object(a.jsxs)("button",{type:"submit",onClick:function(e){e.preventDefault(),console.log("you typed",r),m.collection("romChats").doc(O).collection("messages").add({message:r,name:I.displayName,timestamp:k.a.firestore.FieldValue.serverTimestamp()}),i("")},children:["Send",Object(a.jsx)(v.a,{children:Object(a.jsx)(K.a,{})})]}),Object(a.jsx)(v.a,{children:Object(a.jsx)(W.a,{})})]}),Object(a.jsx)(v.a,{children:Object(a.jsx)(V.a,{})})]})]})},Z=c(62),q=c(104),Q=(c(90),c(41)),Y="SET_USER",$=function(e,t){switch(console.log(t),t.type){case Y:return Object(Q.a)(Object(Q.a)({},e),{},{user:t.user});default:return e}};var ee=function(){var e=D(),t=Object(j.a)(e,2);Object(Z.a)(t[0]);var c=t[1];return Object(a.jsxs)("div",{className:"login",children:[Object(a.jsx)("h2",{children:"Whatsapp clone 2020 "}),Object(a.jsxs)("div",{className:"login_container",children:[Object(a.jsx)("img",{src:"https://www.messengerpeople.com/wp-content/uploads/bfi_thumb/whatsapp-africa-32ilx9h511np7tuz88dwv959eto6oh605v6fxupc6hi35wei6.png",alt:""}),Object(a.jsx)("div",{className:"login_Text",children:Object(a.jsx)("h1",{children:"Sign in..."})}),Object(a.jsx)(q.a,{onClick:function(){u.signInWithPopup(O).then((function(e){c({type:Y,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in with Google.."})]})]})};var te=function(){var e=D(),t=Object(j.a)(e,2),c=t[0].user;return t[1],Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("h1",{children:"237 React Apps"}),Object(a.jsx)("div",{className:"Body_layer",children:c?Object(a.jsxs)(o.a,{children:[Object(a.jsx)(T,{}),Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{path:"/romChats/:roomId",children:Object(a.jsx)(X,{})}),Object(a.jsx)(d.a,{path:"/",children:Object(a.jsx)(X,{})})]})]}):Object(a.jsx)(ee,{})})]})},ce=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,106)).then((function(t){var c=t.getCLS,a=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;c(e),a(e),s(e),n(e),r(e)}))};i.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(B,{initialState:{user:null},reducer:$,children:Object(a.jsx)(te,{})})}),document.getElementById("root")),ce()}},[[91,1,2]]]);
//# sourceMappingURL=main.b6ee6e6b.chunk.js.map